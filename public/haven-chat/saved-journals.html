<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saved Gratitude Journals - Haven</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #FF6B8A 0%, #FFD93D 25%, #FF9A8B 50%, #E8447A 75%, #FF8C42 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #FF6B8A 0%, #FFD93D 100%);
            color: white;
            padding: 30px 20px;
            border-radius: 15px;
        }

        .header h1 {
            color: white;
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .header p {
            color: white;
            font-size: 1.2em;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
        }

        .journal-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .journal-date {
            font-size: 1.5em;
            font-weight: bold;
            color: #FF6B8A;
            margin-bottom: 20px;
            text-align: center;
        }

        .journal-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #FF6B8A;
        }

        .section-title {
            font-weight: bold;
            color: #FF6B8A;
            margin-bottom: 10px;
        }

        .section-content {
            color: #666;
            line-height: 1.6;
        }

        .mood-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .mood-item {
            background: linear-gradient(135deg, #FF8C42 0%, #FFD93D 100%);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }

        .no-journals {
            text-align: center;
            background: white;
            border-radius: 15px;
            padding: 50px 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .no-journals h2 {
            color: #FF6B8A;
            margin-bottom: 15px;
        }

        .back-btn {
            background: linear-gradient(135deg, #FF6B8A 0%, #FFD93D 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin-top: 20px;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 138, 0.3);
        }

        .clear-btn {
            background: linear-gradient(135deg, #FF9A8B 0%, #FFD93D 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 154, 139, 0.3);
        }

        /* Mood Section Styles */
        .mood-section-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .mood-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .mood-item {
            background: linear-gradient(135deg, #FF6B8A 0%, #E8447A 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .mood-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 107, 138, 0.4);
        }

        .mood-item.selected {
            background: linear-gradient(135deg, #FF8C42 0%, #D2691E 100%);
            transform: scale(1.05);
        }

        .mood-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .mood-label {
            font-weight: bold;
            font-size: 0.9em;
        }

        .entry-filters {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: linear-gradient(135deg, #FFD93D 0%, #FF8C42 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 217, 61, 0.4);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #FF6B8A 0%, #E8447A 100%);
        }

        .entries-list {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            min-height: 100px;
        }

        .entry-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .entry-date {
            font-weight: bold;
            color: #FF6B8A;
        }

        .entry-mood {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .entry-mood-emoji {
            font-size: 1.2em;
        }

        .entry-mood-label {
            font-weight: bold;
            color: #666;
        }

        .entry-content {
            color: #555;
            line-height: 1.6;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
                                <h1>üìñ Your Haven Journal</h1>
                    <p>Your saved journey entries</p>
            <a href="journal.html" class="back-btn">‚Üê Back to Journal</a>
            <button onclick="clearAllJournals()" class="clear-btn">üóëÔ∏è Clear All</button>
        </div>

        <!-- Today's Mood & Recent Entries Section -->
        <div class="mood-section-container">
            <h2 style="text-align: center; color: #FF6B8A; margin-bottom: 25px; font-size: 1.8em;">
                <span style="font-size: 1.2em;">üòä</span> Today's Mood & Recent Entries
            </h2>
            
            <div class="mood-grid">
                <div class="mood-item" onclick="selectMoodForSavedPage('excited', this)">
                    <div class="mood-icon">üòä</div>
                    <div class="mood-label">Happy</div>
                </div>
                <div class="mood-item" onclick="selectMoodForSavedPage('calm', this)">
                    <div class="mood-icon">üòå</div>
                    <div class="mood-label">Calm</div>
                </div>
                <div class="mood-item" onclick="selectMoodForSavedPage('neutral', this)">
                    <div class="mood-icon">üòê</div>
                    <div class="mood-label">Neutral</div>
                </div>
                <div class="mood-item" onclick="selectMoodForSavedPage('anxious', this)">
                    <div class="mood-icon">üò∞</div>
                    <div class="mood-label">Anxious</div>
                </div>
                <div class="mood-item" onclick="selectMoodForSavedPage('sad', this)">
                    <div class="mood-icon">üòî</div>
                    <div class="mood-label">Sad</div>
                </div>
            </div>
            
            <div class="entry-filters">
                <button class="filter-btn active" onclick="filterEntriesForSavedPage('all')">All</button>
                <button class="filter-btn" onclick="filterEntriesForSavedPage('excited')">Happy</button>
                <button class="filter-btn" onclick="filterEntriesForSavedPage('calm')">Calm</button>
                <button class="filter-btn" onclick="filterEntriesForSavedPage('anxious')">Anxious</button>
                <button class="filter-btn" onclick="filterEntriesForSavedPage('sad')">Sad</button>
            </div>
            
            <div id="entriesList" class="entries-list">
                <!-- Recent entries will be loaded here -->
            </div>
        </div>

        <div id="journals-container">
            <!-- Journals will be loaded here -->
        </div>
    </div>

    <script>
        function loadSavedJournals() {
            const savedJournals = JSON.parse(localStorage.getItem('haven_gratitude_journals') || '[]');
            const reflectionEntries = JSON.parse(localStorage.getItem('haven_journal_entries') || '[]');
            const container = document.getElementById('journals-container');
            
            // Check if we have any entries at all
            if (savedJournals.length === 0 && reflectionEntries.length === 0) {
                container.innerHTML = `
                    <div class="no-journals">
                        <h2>üåü No Saved Journals Yet</h2>
                        <p>Start your gratitude journey by filling out your first journal entry!</p>
                        <a href="journal.html" class="back-btn">Go to Journal</a>
                    </div>
                `;
                return;
            }
            
            // Sort journals by date (newest first)
            savedJournals.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            container.innerHTML = savedJournals.map((journal, index) => {
                const date = new Date(journal.date);
                const formattedDate = date.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                return `
                    <div class="journal-card">
                        <div class="journal-date">üìÖ ${formattedDate}</div>
                        
                        <div class="journal-section">
                            <div class="section-title">‚ú® Gratitude Generator</div>
                            <div class="section-content">
                                <strong>üåÖ Morning Magic:</strong> ${journal.morningMagic || 'Not filled'}<br>
                                <strong>üíù People Power:</strong> ${journal.peoplePower || 'Not filled'}<br>
                                <strong>üéØ Personal Wins:</strong> ${journal.personalWins || 'Not filled'}
                            </div>
                        </div>
                        
                        <div class="journal-section">
                            <div class="section-title">‚ö° Mood Energy Check</div>
                            <div class="mood-section">
                                <div class="mood-item">üòä Mood: ${journal.selectedMood || 'Not selected'}</div>
                                <div class="mood-item">‚ö° Energy: ${journal.selectedEnergy || 'Not selected'}</div>
                                <div class="mood-item">‚ú® Gratitude: ${journal.selectedGratitude || 'Not selected'}</div>
                            </div>
                        </div>
                        
                        <div class="journal-section">
                            <div class="section-title">üíñ Appreciation Station</div>
                            <div class="section-content">
                                <strong>üè† Home & Comfort:</strong> ${journal.homeComfort || 'Not filled'}<br>
                                <strong>üí™ Body & Health:</strong> ${journal.bodyHealth || 'Not filled'}<br>
                                <strong>üé® Opportunities & Growth:</strong> ${journal.opportunitiesGrowth || 'Not filled'}<br>
                                <strong>üåç World Around Me:</strong> ${journal.worldAroundMe || 'Not filled'}
                            </div>
                        </div>
                        
                                                 <div class="journal-section">
                             <div class="section-title">üåü Completed Practices</div>
                             <div class="section-content">
                                 <strong>‚úÖ Completed:</strong> ${journal.completedPractices}/5 practices
                             </div>
                         </div>
                         
                         <button onclick="deleteJournal(${index})" class="clear-btn">üóëÔ∏è Delete This Entry</button>
                     </div>
                 `;
             }).join('');
             
             // Add reflection entries
             if (reflectionEntries.length > 0) {
                 container.innerHTML += '<h2 style="text-align: center; color: #FF6B8A; margin: 40px 0 20px 0; font-size: 2em;">üìù Today\'s Reflections</h2>';
                 
                 reflectionEntries.forEach((entry, index) => {
                     const moodEmojis = {
                         'excited': 'üòä',
                         'calm': 'üòå', 
                         'neutral': 'üòê',
                         'anxious': 'üò∞',
                         'sad': 'üòî'
                     };
                     
                     const moodLabels = {
                         'excited': 'Happy',
                         'calm': 'Calm',
                         'neutral': 'Neutral', 
                         'anxious': 'Anxious',
                         'sad': 'Sad'
                     };
                     
                     container.innerHTML += `
                         <div class="journal-card">
                             <div class="journal-date">üìÖ ${entry.date}</div>
                             
                             <div class="journal-section">
                                 <div class="section-title">üí≠ Reflection</div>
                                 <div class="section-content">
                                     <div style="margin-bottom: 15px;">
                                         <strong>${moodEmojis[entry.mood] || 'üòê'} Mood:</strong> ${moodLabels[entry.mood] || 'Unknown'}
                                     </div>
                                     <div style="font-style: italic; color: #555; line-height: 1.6;">
                                         "${entry.reflection}"
                                     </div>
                                 </div>
                             </div>
                             
                             <button onclick="deleteReflection(${index})" class="clear-btn">üóëÔ∏è Delete This Reflection</button>
                         </div>
                     `;
                 });
             }
        }
        
        function deleteJournal(index) {
            if (confirm('Are you sure you want to delete this journal entry?')) {
                const savedJournals = JSON.parse(localStorage.getItem('haven_gratitude_journals') || '[]');
                savedJournals.splice(index, 1);
                localStorage.setItem('haven_gratitude_journals', JSON.stringify(savedJournals));
                loadSavedJournals();
            }
        }
        
        function deleteReflection(index) {
            if (confirm('Are you sure you want to delete this reflection entry?')) {
                const reflectionEntries = JSON.parse(localStorage.getItem('haven_journal_entries') || '[]');
                reflectionEntries.splice(index, 1);
                localStorage.setItem('haven_journal_entries', JSON.stringify(reflectionEntries));
                loadSavedJournals();
            }
        }
        
        function clearAllJournals() {
            if (confirm('Are you sure you want to delete ALL saved journal entries? This cannot be undone.')) {
                localStorage.removeItem('haven_gratitude_journals');
                localStorage.removeItem('haven_journal_entries');
                loadSavedJournals();
            }
        }
        
        // Load journals when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedJournals();
            loadJournalEntriesForSavedPage();
        });

        // Mood selection for saved page
        function selectMoodForSavedPage(mood, element) {
            // Remove selected class from all mood items
            document.querySelectorAll('.mood-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // Add selected class to clicked item
            element.classList.add('selected');
            
            // Store selected mood (for potential future use)
            localStorage.setItem('selectedMoodForSavedPage', mood);
        }

        // Load journal entries for the saved page
        function loadJournalEntriesForSavedPage() {
            const entries = JSON.parse(localStorage.getItem('haven_journal_entries') || '[]');
            const entriesList = document.getElementById('entriesList');
            
            if (entries.length === 0) {
                entriesList.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">No journal entries yet. Start by adding your first reflection!</p>';
                return;
            }
            
            entriesList.innerHTML = entries.map(entry => `
                <div class="entry-item">
                    <div class="entry-header">
                        <div class="entry-date">${entry.date}</div>
                        <div class="entry-mood">
                            <span class="entry-mood-emoji">${getMoodEmoji(entry.mood)}</span>
                            <span class="entry-mood-label">${getMoodLabel(entry.mood)}</span>
                        </div>
                    </div>
                    <div class="entry-content">"${entry.reflection}"</div>
                </div>
            `).join('');
        }

        // Filter entries for saved page
        function filterEntriesForSavedPage(mood) {
            // Update active filter button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Load and filter entries based on mood
            const entries = JSON.parse(localStorage.getItem('haven_journal_entries') || '[]');
            const entriesList = document.getElementById('entriesList');
            
            if (entries.length === 0) {
                entriesList.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">No journal entries yet. Start by adding your first reflection!</p>';
                return;
            }
            
            // Filter entries based on mood
            let filteredEntries = entries;
            if (mood !== 'all') {
                filteredEntries = entries.filter(entry => entry.mood === mood);
            }
            
            if (filteredEntries.length === 0) {
                entriesList.innerHTML = `<p style="text-align: center; color: #666; padding: 20px;">No ${mood} entries found. Try selecting "All" to see all entries.</p>`;
                return;
            }
            
            entriesList.innerHTML = filteredEntries.map(entry => `
                <div class="entry-item">
                    <div class="entry-header">
                        <div class="entry-date">${entry.date}</div>
                        <div class="entry-mood">
                            <span class="entry-mood-emoji">${getMoodEmoji(entry.mood)}</span>
                            <span class="entry-mood-label">${getMoodLabel(entry.mood)}</span>
                        </div>
                    </div>
                    <div class="entry-content">"${entry.reflection}"</div>
                </div>
            `).join('');
        }

        // Helper functions for mood display
        function getMoodEmoji(mood) {
            const emojis = {
                'excited': 'üòä',
                'calm': 'üòå',
                'neutral': 'üòê',
                'anxious': 'üò∞',
                'sad': 'üòî'
            };
            return emojis[mood] || 'üòê';
        }

        function getMoodLabel(mood) {
            const labels = {
                'excited': 'Happy',
                'calm': 'Calm',
                'neutral': 'Neutral',
                'anxious': 'Anxious',
                'sad': 'Sad'
            };
            return labels[mood] || 'Neutral';
        }
    </script>
</body>
</html> 